<template>
  <!-- 三槽标题 -->
  <div class="Mana">
    <Header title="授权管理" />
    <van-divider
      class="otherLock"
      content-position="left"
      :style="{ color: 'black', borderColor: 'green' }"
    >被授权</van-divider>
    <!-- 显示被授权 -->
    <van-swipe-cell v-for="(record,index) in manaList" :key="index">
      <template #left>
        <van-button square type="primary" text="选择" />
      </template>
      <van-cell  v-if="uid_list[index]==user_uid"
        :border="false"
        :title="manaList[index].accexp.accreq.info+' '+manaList[index].accexp.accreq.accsee"
      />
      <template #right>
        <van-button square type="danger" text="归还" @click="del(manaList[index].uuid,index)" />

      </template>
    </van-swipe-cell>

    <van-divider
      class="otherLock"
      content-position="left"
      :style="{ color: 'black', borderColor: 'green' }"
    >我的授权</van-divider>
    <!-- 显示我的授权 -->
   <van-swipe-cell v-for="(record1,index1) in manaList" :key="'A'+index1">
      <template #left>
        <van-button square type="primary" text="选择" />
      </template>
      <van-cell  v-if="uid_list[index1]!=user_uid"
        :border="false"
        :title="manaList[index1].accexp.accreq.info+' '+manaList[index1].accexp.accreq.accsee"
      />
      <template #right>
        <van-button square type="danger" text="撤回" @click="del(manaList[index1].uuid,index1)" />
        <!-- <van-button square type="primary" text="收藏" /> -->
      </template>
    </van-swipe-cell>
  </div>
</template>

<script>
import Header from "../components/privilegeManager/Header";
export default {
  components: { Header },
  data() {
    return {
      // user_uid:this.$store.state.uid,
      user_uid:'2',
      uid_list:[],
      manaList: [
// 	{"accexp":
// 		{
// 			"PIK":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51],
// 			"accendtime":["2","0","2","0","-","1","2","-","1","2"," ",":","1","0",":","1","0",":","1","0"],
// 			"access":["一","号","门"],
// 			"accreq":
// 				{
// 					"accsee":"1号门","info":["北京市通州区永顺镇中仓街道街道5号楼"],
//           "infolen":18,
//           "signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 					"signdatelen":64,
// 					"time":"2020-03-26 :05:16:47"
// 				},
// 			"info":["北","京","市","通","州","区","x","x","x","镇","x","x","0","1","街","道","x","x","号"],
// 			"signkey":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51]
// 		},
// 	"signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 	"singdatelen":64,
// 	"uuid":['2 fefeafe']
// },
// {
// 	"accexp":
// 		{
// 			"PIK":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51],
// 			"accendtime":["2","0","2","0","-","1","2","-","1","2"," ",":","1","0",":","1","0",":","1","0"],
// 			"access":["一","号","门"],
// 			"accreq":
// 				{
// 					"accsee":"3号门","info":["北京市通州区梨园镇玉桥街道3号楼"],
//           "infolen":18,
//           "signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 					"signdatelen":64,
// 					"time":"2020-03-26 :05:16:47"
// 				},
// 			"info":["北","京","市","通","州","区","x","x","x","镇","x","x","0","1","街","道","x","x","号"],
// 			"signkey":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51]
// 		},
// 	"signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 	"singdatelen":64,
// 	"uuid":['2 dfaefee' ]
// },
// {
// 	"accexp":
// 		{
// 			"PIK":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51],
// 			"accendtime":["2","0","2","0","-","1","2","-","1","2"," ",":","1","0",":","1","0",":","1","0"],
// 			"access":["一","号","门"],
// 			"accreq":
// 				{
// 					"accsee":"2号门","info":["北京市通州区西集镇北苑街道2号楼"],
//           "infolen":18,
//           "signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 					"signdatelen":64,
// 					"time":"2020-03-26 :05:16:47"
// 				},
// 			"info":["北","京","市","通","州","区","x","x","x","镇","x","x","0","1","街","道","x","x","号"],
// 			"signkey":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51]
// 		},
// 	"signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 	"singdatelen":64,
// 	"uuid":['3 321321']
// },
// {
// 	"accexp":
// 		{
// 			"PIK":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51],
// 			"accendtime":["2","0","2","0","-","1","2","-","1","2"," ",":","1","0",":","1","0",":","1","0"],
// 			"access":["一","号","门"],
// 			"accreq":
// 				{
// 					"accsee":"2号门","info":["北京市通州区台湖镇新华街道1号楼"],
//           "infolen":18,
//           "signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 					"signdatelen":64,
// 					"time":"2020-03-26 :05:16:47"
// 				},
// 			"info":["北","京","市","通","州","区","x","x","x","镇","x","x","0","1","街","道","x","x","号"],
// 			"signkey":[-91,-2,5,-63,-73,100,49,55,64,-37,102,61,-45,72,-17,-62,72,-56,51,114,4,21,88,-59,-111,-41,11,-63,116,115,-64,-43,-97,-26,-59,52,76,-14,79,-57,120,126,-105,32,27,-60,9,-33,120,-50,97,-124,-33,17,75,63,-26,-56,117,121,-98,-56,62,-51]
// 		},
// 	"signdate":[79,55,-14,-125,55,-35,14,-126,28,-119,-122,7,15,105,-83,-56,-51,19,67,35,91,-65,69,16,-127,18,117,98,-99,53,-110,20,79,63,98,-48,5,-79,124,-56,49,-3,-11,-30,-119,-113,41,70,-52,71,-83,60,-17,-43,-25,37,45,29,69,-27,-115,11,35,-86],
// 	"singdatelen":64,
// 	"uuid":['3 321321']
// },
]
    };
  },
  methods: {
    del(tockenuuid,index) {
       $APP.deleteTocken(tockenuuid);
       this.manaList.pop(index);
       this.uid_list.pop(index);
    },
    ongetTockens(){
      
      var list=$APP.getTockens()
      if(list!=null)
         this.manaList=JSON.parse(list)              //获取token列表      
      for(var i=0;i<this.manaList.length;i++){
        let useruid=this.manaList[i].uuid.split(" ")[0];
        console.log(useruid)
        this.uid_list.push(useruid)    //把好友uid装进列表里
      }    
    },
  },
  created(){
    this.ongetTockens()
  }
};
</script>

<style scoped>
.Mana {
  height: 100%;
  width: 100%;
  overflow: hidden;
  background-color: #f5f5f5;
}
.otherLock {
  width: 100%;
  /* height: calc(100% - 50px); */
  margin-top: 60px;
  font-size: 20px;
  font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
}
</style>
